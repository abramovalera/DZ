plugins {
    id 'java-library'
    id 'idea' // Добавляем плагин IDEA для лучшей интеграции
}

repositories {
    mavenCentral()
}

// Настройки кодировки
tasks.withType(JavaCompile).configureEach {
    options.encoding = 'UTF-8'
    options.compilerArgs += ['-parameters'] // Для поддержки параметризованных тестов
}

dependencies {
    // Selenide с автоматическим управлением драйверами
    testImplementation 'com.codeborne:selenide:7.2.1'

    // JUnit 5 + WebDriverManager
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.10.0'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.10.0'
    testImplementation 'io.github.bonigarcia:webdrivermanager:5.6.3'

    // Логирование (для устранения предупреждения SLF4J)
    testRuntimeOnly 'org.slf4j:slf4j-simple:2.0.9'
}

test {
    useJUnitPlatform()
    systemProperties = [
            'selenide.headless': 'false', // Headless-режим
            'selenide.pageLoadStrategy': 'eager', // Оптимизация загрузки страниц
            'selenide.timeout': '10000' // 10 секунд ожидания элементов
    ]

    // Настройки для Gradle
    testLogging {
        events "passed", "skipped", "failed"
        showStandardStreams = true
    }

    // Параллельный запуск тестов
    maxParallelForks = Runtime.runtime.availableProcessors()
}